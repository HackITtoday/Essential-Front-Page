<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Essential UK Hotel Reservations 01189714700</title>
<link href="/bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" >
<link href="/bower_components/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" >
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/masonry/2.1.08/jquery.masonry.min.js"></script>
<script src="/bower_components/angular/angular.min.js"></script>
<script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/bower_components/bootstrap/js/button.js"></script>
<script src="/bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js"></script>
<script src="//twitter.github.io/typeahead.js/js/handlebars.js"></script>
<script src="//twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
<script>
$(window).load(function(){
    var search = new Bloodhound({
datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
queryTokenizer: Bloodhound.tokenizers.whitespace,
prefetch:{ url:  "/index.json"}
});

    search.initialize();

    $('.essential .typeahead').typeahead(null, {
       name: 'search',
       displayKey: 'value',
       source: search.ttAdapter(),
       templates: {
       empty: [
       '<div class="empty-message">',
       'Can\'t Find Want Your Looking For? <br /> We\'d Love to Help Please <br /> Call <a href="tel:01189714700">0118 971 4700</a>, <a href="#!" onclick="$zopim.livechat.button.show();"> Chat </a>, or <a href="mailto:nick@essential-hotels.com"> Email </a>',
       '</div>'
  ].join('\n'),
  suggestion: Handlebars.compile('<p class="{{type}}">{{value}}</p>')
  }
  }).bind("typeahead:selected", function(obj, datum, name) {
  if (datum.url) {
    $(location).attr('href', datum.url);
  }
  }).bind("typeahead:cursorchanged", function(obj, datum, name) {
    console.log(obj, datum, name);
    if (datum.url) {
      /* $(location).attr('href', datum.url); */
    }
    });
});
</script>
<style type='text/css'>
body #main {
  background: url(//essentialhotels.co.uk/wp-content/uploads/2014/08/Lowry-Hotel-Different-1200-x-Use.jpg) 50%;
}

body .white-box {
  background: #FFFFFF;
  opacity: .9;
  text-align: center;
  min-height: 187px;
  padding: 17px 70px;
  max-width: 427px;
  margin: 75px auto;
}

.typeahead,
.tt-query,
.tt-hint {
  width: 396px;
  height: 30px;
  padding: 8px 12px;
  font-size: 24px;
  line-height: 30px;
  border: 2px solid #ccc;
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  outline: none;
}

.typeahead {
  background-color: #fff;
}

.typeahead:focus {
  border: 2px solid #0097cf;
}

.tt-query {
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.tt-hint {
  color: #999
}

.tt-dropdown-menu {
  font-size:1.5em;
  width: 422px;
  margin-top: 12px;
  padding: 8px 0;
  background-color: #fff !important;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-border-radius: 8px;
  -moz-border-radius: 8px;
  border-radius: 8px;
  -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
  -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
  box-shadow: 0 5px 10px rgba(0,0,0,.2);
}

.tt-suggestion {
  padding: 3px 20px;
  font-size: 18px;
  line-height: 24px;
}

.tt-suggestion.tt-cursor {
  color: #fff;
  background-color: #0097cf;

}

.tt-suggestion p {
  margin: 0;
}

.gist {
  font-size: 14px;
}
.grid {
  border: solid 1px #ccc padding: 0px 0px 0 0;
  margin: auto;
  display: -webkit-flex; /* Safari */
  display: flex;
}
.flex {
  -webkit-flex: 1; /* Safari 6.1+ */
  -ms-flex: 1; /* IE 10 */ 
  flex: 1;
}

.grid img {
  position: absolute;
  min-width:100%;
  min-height:100%;
}
.grid img.tall {
  max-width: 120%;
  margin: 0 -10%;
}
.grid img.wide {
  max-height: 100%;
}
.grid li {
  display: inline-block;
  width: 200px;
  height: 200px;
  border: solid 0px #ccc;
  margin: 0;
  background: #eee;
  overflow:hidden;
}
.hotels {
  background:red;
}
.destinations {
  background:green;
}
.attractions {
  background:blue;
}
/**** Transitions ****/

.masonry,
.masonry li { /* apply before masonry add class */
  position: absolute; /* important to add it before enter animation start */

  -webkit-transition-duration: .9s;
  transition-duration: .9s;

  -webkit-transition-property: all;
  transition-property: all;
}
.masonry .masonry-enter { /* limit animated properties for entering elements */
  -webkit-transition-property: -webkit-transform, opacity;
  transition-property: transform, opacity;
}

.masonry-enter,
.masonry-leave.masonry-leave-active {
  opacity: 0;
  -webkit-transform: scale(0.1);
  transform: scale(0.1);
}

.masonry-leave,
.masonry-enter.masonry-enter-active {
  opacity: 1;
  -webkit-transform: scale(1);
  transform: scale(1);
}
.center-block {
  margin:auto;
}

</style>
<script type='text/javascript'>//<![CDATA[ 
window.onload=function(){
    $('.grid').find('img').each(function() {
        var imgClass = (this.width / this.height > 1) ? 'wide' : 'tall';
        $(this).addClass(imgClass);
    })
  $('.btn').button();
angular.module('app', ['infinite-scroll'])
.directive("masonry", function () {
    var NGREPEAT_SOURCE_RE = '<!-- ngRepeat: ((.*) in ((.*?)( track by (.*))?)) -->';
    return {
        compile: function(element, attrs) {
            // auto add animation to brick element
            var animation = attrs.ngAnimate || "'masonry'";
            var $brick = element.children();
            $brick.attr("ng-animate", animation);
            
            // generate item selector (exclude leaving items)
            var type = $brick.prop('tagName');
            var itemSelector = type+":not([class$='-leave-active'])";
            
            return function (scope, element, attrs) {
                var options = angular.extend({
                    itemSelector: itemSelector
                }, scope.$eval(attrs.masonry));
                
                // try to infer model from ngRepeat
                if (!options.model) { 
                    var ngRepeatMatch = element.html().match(NGREPEAT_SOURCE_RE);
                    if (ngRepeatMatch) {
                        options.model = ngRepeatMatch[4];
                    }
                }
                
                // initial animation
                element.addClass('masonry');
                
                // Wait inside directives to render
                setTimeout(function () {
                    element.masonry(options);
                    
                    element.on("$destroy", function () {
                        element.masonry('destroy')
                    });
                    
                    if (options.model) {
                        scope.$apply(function() {
                            scope.$watchCollection(options.model, function (_new, _old) {
                                if(_new == _old) return;
                                
                                // Wait inside directives to render
                                setTimeout(function () {
                                    element.masonry("reload");
                                });
                            });
                        });
                    }
                });
            };
        }
    };
})
.controller('MainCtrl', function ($scope, $http) {

    if  ($scope.items == undefined) { $scope.items = []}
    $http.get('/index.json').success(function (thisdata) {
      $scope.allitems  =  thisdata; 
      for (i = 0; i <= 400; i++) { 
        $scope.items.push( $scope.allitems.shift() );
      }
    });

      $scope.loadMore = function() {
        for(var i = 1; i <= 40; i++) {
          $scope.items.push( $scope.allitems.shift() );
        }
      };
});

angular.bootstrap(document.body, ['app']);
}//]]>  

</script>


</head>
<body>
<div id="main" class="jumbotron">      
  <div class="container">

    <a href="/" title="Essential Hotels Reservations">
      <img src="https://essentialhotels.co.uk/wp-content/uploads/2013/11/EH-Logo-bed-white-with-black-bold.png" alt="Essential Hotels 01189714700 ">
    </a>


    <div id="MiddleTitle">Search for Hotels, Destinations &amp; Attractions</div>
    <div class="essential">
      <input class="typeahead tt-input" type="text" placeholder="Hotel, City, Area or Interest" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top; background-color: transparent;"/>
    </div>
  </div>  
</div>
<div class="container">
  <div class="row">
    <div class="flex">
      <div class="btn-group btn-group-lg" data-toggle="buttons">
        <label class="btn btn-primary " ng-click="typeFilter = 'attractions'">
          <input type="radio" name="options">Attractions</label>
        <label class="btn btn-primary" ng-click="typeFilter = 'destinations'">
          <input type="radio" name="options">Destinations</label>
        <label class="btn btn-primary" ng-click="typeFilter = 'hotels'">
          <input type="radio" name="options">Hotels</label>
      </div>
    </div>
  </div>
  <footer>
    <div ng-controller="MainCtrl" >
      <ul class="grid" masonry="true" infinite-scroll='loadMore()' infinite-scroll-distance='1' >
        <li ng-repeat="item in items | filter: { type: typeFilter }" class='{{item.type}}' >
        <span><a href="{{item.url}}" ><img src="{{item.image}}" /> <h3> {{item.value}} </h3></a></span>
        </li> 
      </ul>
    </div>
  </footer>
  </body>
</html>



