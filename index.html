<!DOCTYPE html>

<html>
<!--Script and Style References-->
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Essential UK Hotel Reservations 01189 714 700</title>
        <link href="./bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" >
        <link href="./bower_components/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" >
        <link href="./css/main.css" rel="stylesheet" >
        <link rel="stylesheet" href="css/animations.css">
        <script src="./bower_components/jquery/dist/jquery.min.js"></script>
        <script src="./bower_components/typeahead.js/dist/typeahead.jquery.min.js"></script>
        <script src="./bower_components/typeahead.js/dist/bloodhound.min.js"></script>
        <script src="./bower_components/handlebars/handlebars.js"></script>
        <script src="./bower_components/angular/angular.min.js"></script>
        <script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="./bower_components/bootstrap/js/button.js"></script>
        <script src="./bower_components/ngInfiniteScroll/build/ng-infinite-scroll.min.js"></script>
        <script src="./bower_components/angular-pageslide/angular-pageslide-directive.js"></script>
        <script src="./bower_components/angular-side-menu/angular-slide-menu.js"></script>
        <script src="./bower_components/angular-route/angular-route.min.js"></script>
        <script type='text/javascript'>

//<![CDATA[
            window.onload=function(){

/*Solves Preview Button Issue*/
            if (window.location.href.indexOf("?") > 15) {
                window.location.href = "https://essentialhotels.co.uk/index.php?" + window.location.href.split("?").pop();
            }

/*Search Box Script */
                var search = new Bloodhound({
            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            prefetch:{ url:  "./indexlatcat.json"}
            });

                search.initialize();
                $('.essential .typeahead').typeahead(null, {
                  name: 'search',
                  displayKey: 'value',
                  source: search.ttAdapter(),
                  templates: {
                  empty: '<div class="empty-message"> Can\'t Find Want Your Looking For? <br /> We\'d Love to Help Please <br /> Call <a href="tel:01189714700">0118 971 4700</a>, <a href="#!" onclick="$zopim.livechat.button.show();"> Chat </a>, or <a href="mailto:nick@essential-hotels.com"> Email </a> </div>' ,
                  suggestion: Handlebars.compile('<p class="{{type}}">{{value}}</p>')
                  }
                  }).bind("typeahead:selected", function(obj, datum, name) {
                    if (datum.url) {
                      $(location).attr('href', datum.url);
		      cat_filter = window.location.href.split("#").pop().split('/');
		      if (cat_filter[2])  $( ".nav-pills li a." + cat_filter[2] ).trigger( "click" );
		      if (cat_filter[1]) $('input.typeahead').val(cat_filter[1]);
                    }
                  });

/* the Grid code */
                  $('.grid').find('img').each(function() {
                    var imgClass = (this.width / this.height > 1) ? 'wide' : 'tall';
                    $(this).addClass(imgClass);
                  })

              $('.grid').find('img').each(function() {
                  var imgClass = (this.width / this.height > 1) ? 'wide' : 'tall';
                  $(this).addClass(imgClass);
              })
              $('.btn').button();

//Update Nav When Clicked
	    $(".nav.nav-pills li").click(function() {
	      $(".nav.nav-pills li").removeClass('active');
	      $(this).addClass('active');
	    });
            angular.module('app', ['slideMenu','infinite-scroll',"pageslide-directive","ngRoute"])
            .controller('MainCtrl', function ($scope, $http) {
              if (window.location.href.indexOf("#") > 15) {
		cat_filter = window.location.href.split("#").pop().split('/');
		$scope.typeFilter = cat_filter[2];
		$scope.catFilter = cat_filter[1];
		// look at facility and collections in
		// .grid .facilities li
		// .grid .collections li
		// and put it in $scope 
	      }

              if  ($scope.items == undefined) { $scope.items = [] }

              $http.get('./indexlatcat.json').success(function (thisdata) {
                $scope.allitems  =  thisdata;
                for (i = 0; i <= 840; i++) {
                  $scope.items.push( $scope.allitems.shift() );
                }
              });
              $scope.loadMore = function() {
                for(var i = 1; i <= 40; i++) {
                  $scope.items.push( $scope.allitems.shift() );
                }
              };
            });

            angular.bootstrap(document.body, ['app']);
            }//]]>


        </script>

<!--When User Scrolls down then the class changes to the two navbar elements-->
        <script>
            $(window).scroll(function() {
                $('.jumbotron').each(function(){
                    var imagePos = $(this).offset().top;
                    var topOfWindow = $(window).scrollTop();
                    if (imagePos < topOfWindow+1) {
                        $(this).addClass("ng-hide");
                    }
                });
                $('.navbar').each(function(){
                    var imagePos = $(this).offset().top;
                    var topOfWindow = $(window).scrollTop();
                    if (imagePos < topOfWindow+1) {
                        $(this).addClass("slidedown");
                        $(this).removeClass("slideup");
                    }
                });
                $('.row').each(function(){
                    var imagePos = $(this).offset().top;
                    var topOfWindow = $(window).scrollTop();
                    if (imagePos < topOfWindow+1) {
                        $(this).addClass("slidedown");
                    }
                });
            });
        </script>

    </head>

    <body>

<!-- Top Push Down Menu
        <section id="wrapper" class="wrapper" data-asm-wrapper>
            <section id="buttons">
                <div data-asm-control="pushTop">Push Top</div>
            </section>
        </section>

        <nav data-asm-push-top>
            <ul>
                <li>Contact Us</li>
                <li>Email Us</li>
            </ul>
        </nav>
-->
<!--Side Menu
        <section id="main_content" class="inner" ng-app="app">

            <button type="button" class="btn btn-info btn-lg pull-left" id="menu-button" pageslide="left"  ps-speed="0.5" href="#menu">
                Menu
            </button>

            <div style="padding:20px" id="menu" ng-cloak>

                <div id="close-button">
                    <button type="button" class="btn btn-warning btn-lg pull-right" id="menu-close" href="#">
                        Close
                    </button>
                </div>
-->
<!--Menu List
                <div id="menu-list">
                    <h2 style="color: #fff;">Menu</h2>
                    <ul style="color: #fff">
                        <li><a href="https://essentialhotels.co.uk/aboutus">About Us</a></li>
                        <li><a href="https://essentialhotels.co.uk/contactus">Contact Us</a></li>
                        <li><a href="http://magazine.essentialhotels.co.uk">Magazine</a></li>
                    </ul>
                </div>


            </div>


        </section>
        -->

<!--Menu on Top Right-->
          <li class="dropdown pull-right ng-cloak" style="font-size: 1.5em; margin:10px 20px 0px 0px;">
              <a href="#" class="dropdown-toggle" style="color: #FFF;" data-toggle="dropdown">Menu<span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                  <li><a href="https://essentialhotels.co.uk/aboutus">About Us</a></li>
                  <li><a href="https://essentialhotels.co.uk/contactus">Contact Us</a></li>
                  <li class="divider"></li>
                  <li><a href="http://magazine.essentialhotels.co.uk">Magazine</a></li>
              </ul>
          </li>
<!-- Jumbotron -->
        <section id="main" class="jumbotron">

            <div class="container">

              <div id="WhiteBox">
                  <div id="MiddleTitle">

                      <a href="/" title="Essential Hotels Reservations">
                          <img src="https://essentialhotels.co.uk/wp-content/uploads/2013/11/EH-Logo-bed-white-with-black-bold.png" alt="Essential Hotels 01189714700 ">
                      </a>

                      <div id="TitleAboveSearch" style="font-size:25px; font-family: Roboto, 'Helvetica Neue', Helvetica, Arial, sans-serif; font-weight:300; padding-top:5px ;">
                          Call Our UK Based Hotel Reservation Experts
                      </div>

                      <div id="TextUnderSearch">
                          <a href="tel:0118 971 4700" style="color:#33cccc;">0118 971 4700</a>
                      </div>

                      <div class="essential">
                        <input ng-model="catFilter" class="typeahead" type="text" placeholder="Search Hotels, Destinations or Things To Do" />
                      </div>

                  </div>
              </div>
            </div>

        </section>

<!--Fixed Navbar when you scroll down-->
        <section>
      <nav class="navbar navbar-default navbar-fixed-top slideup" role="navigation">
          <div class="container-fluid">
              <div class="collapse navbar-collapse">
                  <ul class="nav navbar-nav">
                      <li>
                          <div id="titleLogoSmaller">
                              <a href="/" title="Essential Hotels Reservations">
                                  <img src="https://essentialhotels.co.uk/wp-content/uploads/2013/11/EH-Logo-bed-white-with-black-bold.png" alt="Essential Hotels 01189714700 ">
                              </a>
                          </div>
                      </li>
                      <li>
                          <div class="essential">
                            <input ng-model="catFilter" class="typeahead smaller" type="text" placeholder="Search" />
                          </div>
                      </li>
                      <li>
                          <div id="telsmaller">
                              <a href="tel:0118 971 4700" style="color:#33cccc;">0118 971 4700</a>
                          </div>
                      </li>
                      <li class="dropdown pull-right ng-cloak" style="font-size: 1.5em;">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Menu<span class="caret"></span></a>
                          <ul class="dropdown-menu" role="menu">
                              <li><a href="https://essentialhotels.co.uk/aboutus">About Us</a></li>
                              <li><a href="https://essentialhotels.co.uk/contactus">Contact Us</a></li>
                              <li class="divider"></li>
                              <li><a href="http://magazine.essentialhotels.co.uk">Magazine</a></li>
                          </ul>
                      </li>
                  </ul>
              </div>
          </div>
      </nav>
  </section>

<!--Grid of Content-->
        <section class="container ng-cloak">
            <div class="row ">
              <div class="col-centered center-block col-md-12">
                  <ul class="nav nav-pills nav-justified">
                      <li class="active"><a ng-click="typeFilter = ''"> All</a></li>
                      <li><a ng-click="typeFilter = 'hotels'"> Hotels</a></li>
                      <li><a ng-click="typeFilter = 'destinations'"> Destinations</a></li>
                      <li><a ng-click="typeFilter = 'attractions'"> Things To Do</a></li>
                  </ul>


                </div>
            </div>

            <div ng-controller="MainCtrl" class="col-centered center-block" >
              <ul class="grid" masonry infinite-scroll='loadMore()' infinite-scroll-distance='1' >
                <li ng-repeat="item in items | filter: { type: typeFilter, image: '.' } | filter:catFilter as results" class='{{item.type}}' >
                    <div>
                        <a ng-href="{{item.url}}" >
                                <span class="title"> {{item.value}} </span>
                                <div id="gridimage">
                                    <img ng-src="{{item.image}}" />
                                </div>
		                <ul class="facilities" >
			          <li ng-repeat="item in item.facilities" class="{{item}}" >{{item}}</li>
		                </ul>
		                <ul class="collections" >
			          <li ng-repeat="item in item.collections" class="{{item}}" >{{item}}</li>
		                </ul>
                        </a>
                    </div>
                </li>
              </ul>
            </div>

        </section>

    </body>

</html>
